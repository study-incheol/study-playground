# 1.16. The BeanFactory API

> [1.16. The BeanFactory API](https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-beanfactory) ì±•í„°ë¥¼ ìš”ì•½í•œ ë‚´ìš©ì…ë‹ˆë‹¤.

ë¹ˆ íŒ©í† ë¦¬ apiëŠ” ìŠ¤í”„ë§ IOC ê¸°ë°˜ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•©ë‹ˆë‹¤. íŠ¹íˆ ìŠ¤í”„ë§ì˜ ë‹¤ë¥¸ ë¶€ë¶„ë“¤ê³¼ ì„œë“œíŒŒí‹° í”„ë ˆì„ì›Œí¬ì™€ í†µí•©í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤. ë†’ì€ ìˆ˜ì¤€ì˜ `GenericApplicationContext` ì»¨í…Œì´ë„ˆ ë‚´, `DefaultListableBeanFactory` êµ¬í˜„ì²´ëŠ” í•µì‹¬ êµ¬ì„±ìš”ì†Œ ì…ë‹ˆë‹¤. 

ë¹ˆ íŒ©í† ë¦¬ì™€ ê´€ë ¨ëœ ì¸í„°í˜ì´ìŠ¤(BeanFactoryAware, InitializingBean, DisposableBean)ëŠ” ë‹¤ë¥¸ í”„ë ˆì„ì›Œí¬ ìš”ì†Œì™€ í†µí•©í•˜ëŠ”ë° ì¤‘ìš”í•œ ì—­í• ì„ í•©ë‹ˆë‹¤. ì–´ë…¸í…Œì´ì…˜ì´ë‚˜, ë¦¬í”Œë ‰ì…˜ ê¸°ë²•ì„ ì´ìš©í•˜ì§€ ì•Šê³ , ì»¨í…Œì´ë„ˆì™€ êµ¬ì„±ìš”ì†Œê°„ íš¨ìœ¨ì ìœ¼ë¡œ ìƒí˜¸ì‘ìš©ì´ ê°€ëŠ¥í•˜ë„ë¡ í•©ë‹ˆë‹¤. ì–´í”Œë¦¬ì¼€ì´ì…˜ ë ˆë²¨ì˜ ë¹ˆë“¤ì€ ë™ì¼í•œ ì½œë°± ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ, ëŒ€ì²´ì ìœ¼ë¡œ í”„ë¡œê·¸ë˜ë° ì„¤ì • ë°©ì‹ë³´ë‹¤ ì„ ì–¸ì  ì˜ì¡´ì„± ì£¼ì… ë°©ì‹ì„ ì„ í˜¸í•©ë‹ˆë‹¤.

í•µì‹¬ ë¹ˆ íŒ©í† ë¦¬ apiì™€ `DefaultListableBeanFactory` êµ¬í˜„ì²´ëŠ” ì‚¬ìš©í•  êµ¬ì„± í˜•ì‹ì´ë‚˜ êµ¬ì„± ìš”ì†Œì— ëŒ€í•œ ì–´ë…¸í…Œì´ì…˜ì„ ê°€ì •í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´ í™•ì¥ ê¸°ëŠ¥(XmlBeanDefinitionReader ë° AutowireAnnotation BeanPostProcessor ë“±)ì„ í†µí•´ í•µì‹¬ ë©”íƒ€ë°ì´í„° í‘œí˜„ìœ¼ë¡œ ê³µìœ  BeanDefinition ê°œì²´ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ê²ƒì´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìœ ì—°í•˜ê³  í™•ì¥ ê°€ëŠ¥í•˜ê²Œ ë§Œë“œëŠ” ë³¸ì§ˆì…ë‹ˆë‹¤.


## 1.16.1. BeanFactory or ApplicationContext?

ì´ ë¶€ë¶„ì€ ë¹ˆ íŒ©í† ë¦¬ì™€ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ ì»¨í…Œì´ë„ˆ ë ˆë²¨ì˜ ì°¨ì´ì ê³¼, ë¶€íŠ¸ìŠ¤íŠ¸ë˜í•‘ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ì„¤ëª…í•©ë‹ˆë‹¤.  

ì–´í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…ìŠ¤íŠ¸ë¥¼ ê¼­ ì‚¬ìš©í•˜ì§€ ì•Šì„ ì´ìœ ê°€ ì—†ë‹¤ë©´, ì»¤ìŠ¤í…€ ë¶€íŠ¸ìŠ¤íŠ¸ë˜í•‘ì„ ìœ„í•´ì„œ `GenericApplicationContext`ì™€ ìì‹ í´ë˜ìŠ¤ `AnnotationConfigApplicationContext`ë¥¼ ì¼ë°˜ì ì¸ êµ¬í˜„ì²´ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„¤ì •íŒŒì¼ ë¡œë“œ, í´ë˜ìŠ¤íŒ¨ìŠ¤ ìŠ¤ìº”, ë¹ˆ ì •ì˜ë¥¼ í”„ë¡œê·¸ë˜ë° ë°©ì‹, ì–´ë…¸í…Œì´ì…˜ ë°©ì‹ìœ¼ë¡œ ë“±ë¡, 5.0ë²„ì „ë¶€í„°ëŠ” í•¨ìˆ˜í˜• ë¹ˆ ì •ì˜ ë“±ë¡ê¹Œì§€, ìŠ¤í”„ë§ í•µì‹¬ ì»¨í…Œì´ë„ˆì˜ ê¸°ë°˜ì„ êµ¬ì„±í•˜ëŠ” ì£¼ìš” ì§„ì…ì ì…ë‹ˆë‹¤.  

ApplicationContextëŠ” BeanFactoryì˜ ëª¨ë“  ê¸°ëŠ¥ë“¤ì„ í¬í•¨í•˜ê³  ìˆê¸° ë•Œë¬¸ì—, ë¹ˆ ì²˜ë¦¬ì— ëŒ€í•´ì„œ ì™„ì „í•œ ì œì–´ê°€ í•„ìš”í•˜ì§€ ì•Šì€ ê²½ìš°ì— ëŒ€ì²´ë¡œ BeanFactoryë³´ë‹¤ ê¶Œì¥í•©ë‹ˆë‹¤. ApplicationContext(GenericApplicationContext êµ¬í˜„ì²´)ëŠ” ìë™ìœ¼ë¡œ ì—¬ëŸ¬ ì¢…ë¥˜ì˜ ë¹ˆë“¤ì„ íƒì§€í•˜ì§€ë§Œ(íŠ¹ì • ë¹ˆ ì´ë¦„ì´ë‚˜ íƒ€ì…, ì˜ˆ: post-processors), DefaultListableBeanFactoryëŠ” ëª¨ë“  íŠ¹ìˆ˜ ë¹ˆë“¤ì— ëŒ€í•´ì„œ ë¶ˆê°€ì§€ë¡ ì ì´ë‹¤(agnostic).

ì–´ë…¸í…Œì´ì…˜ ì²˜ë¦¬, aop í”„ë¡ì‹±ê³¼ ê°™ì€ ë§ì€ í™•ì¥ëœ ì»¨í…Œì´ë„ˆ ê¸°ëŠ¥ë“¤ì€ BeanPostProcessor í™•ì¥ì§€ì ì´ í•„ìˆ˜ì ì…ë‹ˆë‹¤. ë§Œì•½ post-processorsë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ íƒì§€í•˜ê³ , í™œì„±ì‹œí‚¤ì§€ ì•ŠëŠ” ì¼ë°˜ DefaultListableBeanFactoryë¥¼ ì‚¬ìš©í•œë‹¤ë©´, ë¹ˆ ì„¤ì •ì— ë¬¸ì œê°€ ì—†ìŒì—ë„ ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ” ìƒí™©ì´ í˜¼ë€ìŠ¤ëŸ¬ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ì»¨í…Œì´ë„ˆëŠ” ì¶”ê°€ì„¤ì •ì„ í†µí•´ì„œ ì™„ì „íˆ ë¶€íŠ¸ìŠ¤íŠ¸ë©ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.

The following table lists features provided by the BeanFactory and ApplicationContext interfaces and implementations.

ì•„ë˜ í‘œëŠ” BeanFactory ì™€ ApplicationContext ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ì²´ì— ì˜í•´ ì œê³µë˜ëŠ” ê¸°ëŠ¥ë“¤ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

| Feature | BeanFactory | ApplicationContext |
|--|--|--|
|Bean instantiation/wiring|Yes|Yes|
|Integrated lifecycle management|No|Yes|
|Automatic BeanPostProcessor registration|No|Yes|
|Automatic BeanFactoryPostProcessor registration|No|Yes|
|Convenient MessageSource access (for internationalization)|No|Yes|
|Built-in ApplicationEvent publication mechanism|No|Yes|

ì§ì ‘ DefaultListableBeanFactoryì— ë¹ˆ í›„ì²˜ë¦¬ê¸°ë¥¼ ë“±ë¡í•˜ë ¤ë©´, ì§ì ‘ `addBeanPostProcessor`ë¥¼ ì•„ë˜ ì˜ˆì œì™€ ê°™ì´ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤.

```java
DefaultListableBeanFactory factory = new DefaultListableBeanFactory();
// populate the factory with bean definitions

// now register any needed BeanPostProcessor instances
factory.addBeanPostProcessor(new AutowiredAnnotationBeanPostProcessor());
factory.addBeanPostProcessor(new MyBeanPostProcessor());

// now start using the factory
```

`DefaultListableBeanFactory`ì— ì§ì ‘ `BeanFactoryPostProcessor`ë¥¼ ì ìš©í•˜ë ¤ë©´, `postProcessBeanFactory`ë¥¼ ì•„ë˜ ì˜ˆì œì²˜ëŸ¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

```java
DefaultListableBeanFactory factory = new DefaultListableBeanFactory();
XmlBeanDefinitionReader reader = new XmlBeanDefinitionReader(factory);
reader.loadBeanDefinitions(new FileSystemResource("beans.xml"));

// bring in some property values from a Properties file
PropertySourcesPlaceholderConfigurer cfg = new PropertySourcesPlaceholderConfigurer();
cfg.setLocation(new FileSystemResource("jdbc.properties"));

// now actually do the replacement
cfg.postProcessBeanFactory(factory);
```

ìœ„ì˜ ë‘ ì˜ˆì œë¥¼ ë´¤ì„ ë•Œ, ì§ì ‘ ë“±ë¡í•˜ëŠ” ì ˆì°¨ëŠ” ë¶ˆí¸í•˜ê¸°ì—, ìŠ¤í”„ë§ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ `DefaultListableBeanFactory`ë³´ë‹¤ ë‹¤ì–‘í•œ `ApplicationContext` êµ¬í˜„ì²´ë“¤ì´ ì„ í˜¸ë©ë‹ˆë‹¤. íŠ¹íˆ, ê·œëª¨ê°€ í° ì‹œìŠ¤í…œ êµ¬ì„±ì—ì„œ, BeanFactoryPostProcessor ì™€ BeanPostProcessorë¥¼ ì´ìš©í•œ í™•ì¥ ê¸°ëŠ¥ë“¤ì„ ì´ìš©í•  ë•Œ ìœ ìš©í•©ë‹ˆë‹¤.

{% hint style="success" %}

#### ğŸ’¡ 

AnnotationConfigApplicationContextëŠ” ëª¨ë“  ê³µí†µ ì–´ë…¸í…Œì´ì…˜ í›„ ì²˜ë¦¬ê¸°ë“¤ê³¼ @EnableTransactionManagementì™€ ê°™ì€ ì„¤ì • ì–´ë…¸í…Œì´ì…˜ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ì¶”ê°€ ì²˜ë¦¬ê¸°ë“¤ì„ ì œê³µí•©ë‹ˆë‹¤. ìŠ¤í”„ë§ì˜ ì–´ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì„¤ì •ëª¨ë¸ì˜ ì¶”ìƒí™” ë ˆë²¨ì—ì„œ ë¹ˆ í›„ì²˜ë¦¬ê¸°ëŠ” ë‹¨ì§€ ì»¨í…Œì´ë„ˆì˜ ë‚´ë¶€ ìš”ì†Œë¡œ ì¸ì‹ë©ë‹ˆë‹¤.

{% endhint %}

